import random
import discord
from discord.ext import commands
from bot_lists import yuki_selfies
from bot_lists import yuki_answers
from dadjokes import Dadjoke

client = commands.Bot(command_prefix='$')

@client.event
async def on_ready():
    print(f'Logged in as {client.user}')

@client.event
async def on_member_join(member):
    print(f'{member} has joined')

@client.event
async def on_member_remove(member):
    print(f'{member} has left')

@client.command()
@commands.has_permissions(administrator=True)
async def clear(ctx, amount=10):
    await ctx.channel.purge(limit=amount)

@client.command()
@commands.has_permissions(kick_members=True)
async def yeet(ctx, member: discord.Member, *, reason=None):
    await member.kick(reason=reason)

@client.command()
@commands.has_permissions(ban_members=True)
async def ban(ctx, member: discord.Member, *, reason=None):
    await member.ban(reason=reason)

@client.command()
async def timer(ctx, seconds):
    try:
        stopwatch = int(seconds)
        if stopwatch > 900:
            await ctx.send('Cannot go above 900 seconds')
            raise BaseException

        if stopwatch <= 0:
            await ctx.send('Cannot use negative numbers')
            raise BaseException

        message = await ctx.send(f'Timer: {seconds}')
        
        while True:
            stopwatch -= 1
            if stopwatch == 0:
                await message.edit(content="Time's up!")
                break
            await message.edit(content=f'Time: {stopwatch}')
            await asyncio.sleep(1)
        await ctx.send(f'{ctx.author.mention} Your timer has ended')
        
    except ValueError:
        await ctx.send('Invalid command, please use a number')

@client.command()
async def coin(ctx):
    result = ['heads', 'tails']
    await ctx.send(f'You got {random.choice(result)}!')

@client.command()
async def selfie(ctx):
    yuki_pics = yuki_selfies()
    await ctx.send(random.choice(yuki_pics))
    
@client.command()
async def ask(ctx):
    yuki_reply = yuki_answers()
    await ctx.send(random.choice(yuki_reply))

@client.command()
async def puns(ctx):
    puns = Dadjoke()
    await ctx.send(puns.joke)

@client.command()
async def hello(ctx):
    await ctx.send('Woof!')

@client.command()
async def ehe(ctx):
    await ctx.send('https://tenor.com/view/nandayo-gif-18919523')
    
@client.command()
async def bakamitai(ctx):
    await ctx.send('https://tenor.com/view/yakusa-bakamitai-baka-gif-17961963')

client.run('TOKEN')
